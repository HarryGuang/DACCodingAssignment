{"ast":null,"code":"import { FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/members.service\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../../_forms/text-input/text-input.component\";\nexport class UsereditModalComponent {\n  constructor(membersService, bsModalRef, fb, toastr, router) {\n    this.membersService = membersService;\n    this.bsModalRef = bsModalRef;\n    this.fb = fb;\n    this.toastr = toastr;\n    this.router = router;\n    this.userid = 0;\n    this.username = '';\n    this.displayName = '';\n    this.firstName = '';\n    this.lastName = '';\n    this.gender = '';\n    this.closeBtnName = '';\n    this.userEditForm = new FormGroup({});\n    this.genderList = [{\n      value: 'male',\n      display: 'Males'\n    }, {\n      value: 'female',\n      display: 'Females'\n    }];\n  }\n  ngOnInit() {\n    this.initializeForm();\n  }\n  initializeForm() {\n    this.userEditForm = this.fb.group({\n      gender: [this.gender],\n      username: [this.username, Validators.required],\n      displayName: [this.displayName, Validators.required],\n      firstName: [this.firstName, Validators.required],\n      lastName: [this.lastName, Validators.required]\n    });\n  }\n  matchValues(matchTo) {\n    return control => {\n      return control.value === control.parent?.get(matchTo)?.value ? null : {\n        notMatching: true\n      };\n    };\n  }\n  updateMember() {\n    const values = this.userEditForm.value;\n    console.log(values);\n    this.membersService.updateMember(this.userid, values).subscribe({\n      next: () => {\n        this.membersService.memberCache = new Map();\n        this.bsModalRef.hide();\n        var currentUrl = this.router.url;\n        var refreshUrl = currentUrl.indexOf('/members') > -1 ? '/' : '/members';\n        this.router.navigateByUrl(refreshUrl).then(() => this.router.navigateByUrl(currentUrl));\n        //this.router.navigateByUrl('/members');\n        t;\n      },\n      error: error => {\n        console.log(error);\n      }\n    });\n  }\n}\nUsereditModalComponent.ɵfac = function UsereditModalComponent_Factory(t) {\n  return new (t || UsereditModalComponent)(i0.ɵɵdirectiveInject(i1.MembersService), i0.ɵɵdirectiveInject(i2.BsModalRef), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.Router));\n};\nUsereditModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UsereditModalComponent,\n  selectors: [[\"app-useredit-modal\"]],\n  decls: 28,\n  vars: 9,\n  consts: [[\"autocomplete\", \"off\", 3, \"formGroup\", \"ngSubmit\"], [1, \"modal-header\"], [1, \"modal-title\", \"pull-left\"], [\"type\", \"hidden\", \"formControlName\", \"username\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"close\", \"pull-right\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"visually-hidden\"], [1, \"modal-body\"], [1, \"mb-3\"], [1, \"form-check-label\"], [\"type\", \"radio\", \"value\", \"male\", \"formControlName\", \"gender\", 1, \"form-check-input\"], [\"type\", \"radio\", \"value\", \"female\", \"formControlName\", \"gender\", 1, \"form-check-input\"], [3, \"formControl\", \"label\"], [1, \"modal-footer\"], [\"type\", \"submit\", 1, \"btn\", \"btn-default\"]],\n  template: function UsereditModalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function UsereditModalComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.userEditForm.valid && ctx.updateMember();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"h4\", 2);\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"input\", 3);\n      i0.ɵɵelementStart(5, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function UsereditModalComponent_Template_button_click_5_listener() {\n        return ctx.bsModalRef.hide();\n      });\n      i0.ɵɵelementStart(6, \"span\", 5);\n      i0.ɵɵtext(7, \"\\u00D7\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(8, \"div\", 6)(9, \"div\", 7)(10, \"label\", 8);\n      i0.ɵɵelement(11, \"input\", 9);\n      i0.ɵɵtext(12, \" Male \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"label\", 8);\n      i0.ɵɵelement(14, \"input\", 10);\n      i0.ɵɵtext(15, \" Female \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"label\");\n      i0.ɵɵtext(17, \"Display Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(18, \"app-text-input\", 11);\n      i0.ɵɵelementStart(19, \"label\");\n      i0.ɵɵtext(20, \"First Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"app-text-input\", 11);\n      i0.ɵɵelementStart(22, \"label\");\n      i0.ɵɵtext(23, \"Last Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"app-text-input\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 12)(26, \"button\", 13);\n      i0.ɵɵtext(27);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.userEditForm);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\"Edit User - \", ctx.username, \"\");\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"formControl\", ctx.userEditForm.controls[\"displayName\"])(\"label\", \"Display Name\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formControl\", ctx.userEditForm.controls[\"firstName\"])(\"label\", \"First Name\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formControl\", ctx.userEditForm.controls[\"lastName\"])(\"label\", \"Last Name\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.closeBtnName);\n    }\n  },\n  dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.RadioControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormControlDirective, i3.FormGroupDirective, i3.FormControlName, i6.TextInputComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormGroup","Validators","UsereditModalComponent","constructor","membersService","bsModalRef","fb","toastr","router","value","display","ngOnInit","initializeForm","userEditForm","group","gender","username","required","displayName","firstName","lastName","matchValues","matchTo","control","parent","get","notMatching","updateMember","values","console","log","userid","subscribe","next","memberCache","Map","hide","currentUrl","url","refreshUrl","indexOf","navigateByUrl","then","t","error","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["D:\\Harry\\NetCore\\DACCodingAssignment\\DACCodingAssignment\\clientfront\\src\\app\\modals\\useredit-modal\\useredit-modal.component.ts","D:\\Harry\\NetCore\\DACCodingAssignment\\DACCodingAssignment\\clientfront\\src\\app\\modals\\useredit-modal\\useredit-modal.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { MembersService } from 'src/app/_services/members.service';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport {\n  AbstractControl,\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  ValidatorFn,\n  Validators,\n} from '@angular/forms';\n\n@Component({\n  selector: 'app-useredit-modal',\n  templateUrl: './useredit-modal.component.html',\n  styleUrls: ['./useredit-modal.component.css'],\n})\nexport class UsereditModalComponent implements OnInit {\n  userid = 0;\n  username = '';\n  displayName = '';\n  firstName = '';\n  lastName = '';\n  gender = '';\n  closeBtnName = '';\n\n  userEditForm: FormGroup = new FormGroup({});\n\n  genderList = [\n    { value: 'male', display: 'Males' },\n    { value: 'female', display: 'Females' },\n  ];\n\n  constructor(\n    private membersService: MembersService,\n    public bsModalRef: BsModalRef,\n    private fb: FormBuilder,\n    private toastr: ToastrService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.initializeForm();\n  }\n\n  initializeForm() {\n    this.userEditForm = this.fb.group({\n      gender: [this.gender],\n      username: [this.username, Validators.required],\n      displayName: [this.displayName, Validators.required],\n      firstName: [this.firstName, Validators.required],\n      lastName: [this.lastName, Validators.required],\n    });\n  }\n\n  matchValues(matchTo: string): ValidatorFn {\n    return (control: AbstractControl) => {\n      return control.value === control.parent?.get(matchTo)?.value\n        ? null\n        : { notMatching: true };\n    };\n  }\n\n  updateMember() {\n    const values = this.userEditForm.value;\n    console.log(values);\n\n    this.membersService.updateMember(this.userid, values).subscribe({\n      next: () => {\n        this.membersService.memberCache = new Map();\n        this.bsModalRef.hide();\n\n        var currentUrl = this.router.url;\n        var refreshUrl = currentUrl.indexOf('/members') > -1 ? '/' : '/members';\n        this.router\n          .navigateByUrl(refreshUrl)\n          .then(() => this.router.navigateByUrl(currentUrl));\n        //this.router.navigateByUrl('/members');\n        t\n      },\n      error: (error) => {\n        console.log(error);\n      },\n    });\n  }\n}\n","<form [formGroup]=\"userEditForm\" (ngSubmit)=\"userEditForm.valid && updateMember()\" autocomplete=\"off\">\n    <div class=\"modal-header\">\n      <h4 class=\"modal-title pull-left\">Edit User - {{username}}</h4>\n            <input type=\"hidden\" formControlName=\"username\">\n      <button type=\"button\" class=\"btn-close close pull-right\" aria-label=\"Close\" (click)=\"bsModalRef.hide()\">\n        <span aria-hidden=\"true\" class=\"visually-hidden\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body\">\n            <div class=\"mb-3\">\n                <label class=\"form-check-label\">\n                    <input type=\"radio\" class=\"form-check-input\" value=\"male\" formControlName=\"gender\"> Male\n                </label>\n                <label class=\"form-check-label\">\n                    <input type=\"radio\" class=\"form-check-input\" value=\"female\" formControlName=\"gender\"> Female\n                </label>\n            </div>\n            <label>Display Name</label>\n            <app-text-input \n                [formControl]=\"$any(userEditForm.controls['displayName'])\"\n                [label]=\"'Display Name'\"\n            ></app-text-input>\n            <label>First Name</label>\n            <app-text-input \n                [formControl]=\"$any(userEditForm.controls['firstName'])\"\n                [label]=\"'First Name'\"\n            ></app-text-input>\n            <label>Last Name</label>\n            <app-text-input \n                [formControl]=\"$any(userEditForm.controls['lastName'])\"\n                [label]=\"'Last Name'\"\n            ></app-text-input>  \n    </div>\n    <div class=\"modal-footer\">\n      <button type=\"submit\" class=\"btn btn-default\">{{closeBtnName}}</button>\n    </div>\n</form>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}